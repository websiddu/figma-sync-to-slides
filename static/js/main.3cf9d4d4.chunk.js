(window["webpackJsonpfigma-sync-to-slides-web"]=window["webpackJsonpfigma-sync-to-slides-web"]||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/loading.1023c8b3.svg"},function(e,t,a){e.exports=a.p+"static/media/done.34069618.svg"},,,,,,,function(e,t,a){e.exports=a.p+"static/media/coach-marks.5d616838.svg"},function(e,t,a){e.exports=a.p+"static/media/none.a50a6883.svg"},function(e,t,a){e.exports=a.p+"static/media/alphabetical.aaaa5440.svg"},function(e,t,a){e.exports=a.p+"static/media/reverse-alphabetical.672f1310.svg"},function(e,t,a){e.exports=a.p+"static/media/reverse.92068cd1.svg"},function(e,t,a){e.exports=a.p+"static/media/error.f524a4a1.svg"},function(e,t,a){e.exports=a.p+"static/media/lock.584b0837.svg"},function(e,t,a){e.exports=a.p+"static/media/settings.8794411d.svg"},function(e,t,a){e.exports=a.p+"static/media/logo.85b83bad.svg"},function(e,t,a){e.exports=a.p+"static/media/logo-text.24295080.svg"},function(e,t,a){e.exports=a.p+"static/media/g.b180be65.svg"},function(e,t,a){e.exports=a(48)},,,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n=a(1),i=a.n(n),s=a(9),r=a(2),c=a(0),o=a.n(c),u=a(17),l=a.n(u),d=(a(35),a(36),a(4)),p=a(5),m=a(8),h=a(6),g=a(3),f=a(7),w=function(){function e(t){Object(d.a)(this,e),this.API_VERSION="v1",this.BUCKET="sync-to-slides.google.com.a.appspot.com",this.boundary="-------314159265358979323846",this.delimiter="\r\n--"+this.boundary+"\r\n",this.close_delim="\r\n--"+this.boundary+"--",this.contentType="image/png",this.metadata={name:t.id+".png",mimeType:this.contentType},this.multipartRequestBody=this.delimiter+"Content-Type: application/json\r\n\r\n"+JSON.stringify(this.metadata)+this.delimiter+"Content-Type: "+this.contentType+"\r\nContent-Transfer-Encoding: base64\r\n\r\n"+t.base64Data+this.close_delim}return Object(p.a)(e,[{key:"delete",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e,a){window.gapi.client.storage.objects.delete({bucket:n.BUCKET,object:t}).then(function(t){e(t)},function(e){a(e)})}),e.abrupt("return",a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"insert",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.gapi.client.request({path:"/upload/storage/".concat(this.API_VERSION,"/b/").concat(this.BUCKET,"/o"),method:"POST",params:{uploadType:"multipart"},headers:{"Content-Type":'multipart/mixed; boundary="'.concat(this.boundary,'"')},body:this.multipartRequestBody}),a=new Promise(function(e,a){t.execute(function(t){e(t)},function(e){a(e)})}),e.abrupt("return",a);case 3:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()}]),e}(),v=function(){function e(t,a){Object(d.a)(this,e),this.requests=[],this.data=[],this.currenSlidesData=[],this.imageId="MyImage_01",this.emu4M={magnitude:4e6,unit:"EMU"},this.pageSize={width:this.emu4M,height:this.emu4M},this.newSlides=[],this.oldSlides=[],this.presentationId="",this.presentationId=t,a&&(this.data=a,this.buildRequests())}return Object(p.a)(e,[{key:"buildRequests",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.Message.setState({msg:"Preparing the images..."}),e.next=3,this.get(this.presentationId);case 3:t=e.sent,window.AddressBar.setState({data:{id:t.presentationId,title:t.title}}),window.parent.postMessage({pluginMessage:{type:"store-preso-info",data:{id:t.presentationId,title:t.title}}},"*"),this.currentSlidesData=t,this.pageSize=t.pageSize,a=this.getInsertSlideRequests(),n=this.getCreateImageRequests(),this.requests=[].concat(Object(s.a)(a),Object(s.a)(n)),this.insert();case 12:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"getCreateImageRequests",value:function(){var e=this,t=this.newSlides.map(function(t){var a=t.name.replace(".png","");return{createImage:{objectId:"_img_".concat(a),url:t.mediaLink,elementProperties:{pageObjectId:a,size:e.pageSize,transform:{scaleX:1,scaleY:1,translateX:0,translateY:0,unit:"EMU"}}}}}),a=this.oldSlides.map(function(e){var t=e.name.replace(".png","");return{replaceImage:{imageObjectId:"_img_".concat(t),url:"".concat(e.mediaLink,"&access_token=").concat(window.gapi.auth.getToken().access_token),imageReplaceMethod:"IMAGE_REPLACE_METHOD_UNSPECIFIED"}}});return[].concat(Object(s.a)(t),Object(s.a)(a))}},{key:"getInsertSlideRequests",value:function(){var e=this,t=[],a=[];return this.data.forEach(function(n){var i=n.name.replace(".png","");e.checkIfSlideAlreadyExists(i)?a.push(n):t.push(n)}),this.newSlides=t,this.oldSlides=a,t.map(function(e){return{createSlide:{objectId:e.name.replace(".png","")}}})}},{key:"checkIfSlideAlreadyExists",value:function(e){return this.currentSlidesData.slides&&this.currentSlidesData.slides.find(function(t){return t.objectId===e})}},{key:"checkPermissions",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e,a){window.gapi.client.slides.presentations.batchUpdate({presentationId:t,requests:[{createSlide:{objectId:"abcxyz123"}},{deleteObject:{objectId:"abcxyz123"}}]}).then(function(t){e(t)},function(e){a(e)})}),e.abrupt("return",a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"get",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new Promise(function(e,a){window.gapi.client.slides.presentations.get({presentationId:t,fields:"pageSize,presentationId,title,slides(objectId,pageElements)"}).then(function(t){e(t.result)},function(e){a(e)})}),e.abrupt("return",a);case 2:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()},{key:"deleteAllImages",value:function(){var e=Object(r.a)(i.a.mark(function e(t){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Promise.all(this.data.map(function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return a=new w(t.name),e.next=3,a.delete(t.name);case 3:return n=e.sent,e.abrupt("return",n);case 5:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 2:e.sent.every(function(e){return 204===e.status})&&400!==t.status&&(window.Message.setState({msg:"All done!",type:"success"}),window.StatusBar.setState({isDisabled:!1}),setTimeout(function(){window.Message.setState({msg:"",type:"none"}),window.ListComponent.uploadDone()},2e3)),400===t.status&&(window.Message.setState({msg:"Sync failed, image too large",type:"error"}),window.ListComponent.uploadDone(),window.StatusBar.setState({isDisabled:!1}));case 5:case"end":return e.stop()}},e,this)}));return function(t){return e.apply(this,arguments)}}()},{key:"insert",value:function(){var e=this;window.Message.setState({msg:"Writing to slides..."}),window.gapi.client.slides.presentations.batchUpdate({presentationId:this.presentationId,requests:this.requests}).then(function(t){window.Message.setState({msg:"Cleaning up cloud...",type:"loading"}),e.deleteAllImages({status:200})},function(t){e.deleteAllImages(t)})}}]),e}(),b=a(18),y=a.n(b),k=(a(37),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this))).state={data:null},a.handleURL=a.handleURL.bind(Object(g.a)(a)),a.clearAddressBar=a.clearAddressBar.bind(Object(g.a)(a)),a.openSlidesFile=a.openSlidesFile.bind(Object(g.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){window.parent.postMessage({pluginMessage:{type:"get-preso-info"}},"*")}},{key:"openSlidesFile",value:function(){window.open("https://docs.google.com/presentation/d/".concat(this.state.data.id),"_blank")}},{key:"handleURL",value:function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n,s,r,c,o,u;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(window.Message.setState({msg:"Fetching the slides!",type:"loading"}),""!==(a=t.target.value)){e.next=5;break}return window.Message.setState({msg:"",type:""}),e.abrupt("return");case 5:return n=this.getIdFromURL(a),s=new v(n),e.prev=7,e.next=10,s.get(n);case 10:return r=e.sent,e.next=13,s.checkPermissions(n);case 13:window.Message.setState({msg:"",type:""}),e.next=23;break;case 16:return e.prev=16,e.t0=e.catch(7),c="Failed to fetch slides!",o="error",404===e.t0.status&&(c="Requested file was not found"),403===e.t0.status&&(c="You don't have write access",o="lock"),window.Message.setState({msg:c,type:o}),e.abrupt("return");case 23:u={data:window.ListComponent.state.data,id:n},this.setState({data:{id:n,title:r.title}}),window.ListComponent.setState(u),window.parent.postMessage({pluginMessage:{type:"store-preso-info",data:{id:n,title:r.title}}},"*");case 27:case"end":return e.stop()}},e,this,[[7,16]])}));return function(t){return e.apply(this,arguments)}}()},{key:"getIdFromURL",value:function(e){return(e=(e=(e=(e=e.replace("://docs.google.com/presentation/d/","")).replace("https","")).replace("http","")).split("/"))[0]}},{key:"clearAddressBar",value:function(){this.setState({data:void 0})}},{key:"render",value:function(){return o.a.createElement("div",{className:"AddressBar"},o.a.createElement("div",{className:"type type--pos-small-normal"},"Presentation"),!this.state.data&&o.a.createElement("input",{type:"input",className:"input",placeholder:"Enter slides url or id...",onChange:this.handleURL}),!this.state.data&&o.a.createElement("div",{className:"coachMarks"},o.a.createElement("img",{src:y.a,className:"coachMarkImg",alt:"Coachmarks"})),this.state.data&&o.a.createElement("div",{className:"InfoBar"},o.a.createElement("div",{className:"Name"},this.state.data.title),o.a.createElement("button",{className:"iconButton",onClick:this.openSlidesFile},o.a.createElement("svg",{fill:"none",height:"14",width:"14",stroke:"#787878",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24"},o.a.createElement("path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6"}),o.a.createElement("polyline",{points:"15 3 21 3 21 9"}),o.a.createElement("line",{x1:"10",x2:"21",y1:"14",y2:"3"}))),o.a.createElement("button",{className:"iconButton",onClick:this.clearAddressBar},o.a.createElement("svg",{fill:"none",height:"14",width:"14",stroke:"#787878",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",viewBox:"0 0 24 24"},o.a.createElement("circle",{cx:"12",cy:"12",r:"10"}),o.a.createElement("line",{x1:"8",x2:"16",y1:"12",y2:"12"})))))}}]),t}(o.a.Component)),S=a(13),E=a.n(S),O=a(14),j=a(10),x=a.n(j),C=a(11),I=a.n(C),M=(a(42),a(19)),N=a.n(M),L=a(20),T=a.n(L),_=a(21),B=a.n(_),A=a(22),D=a.n(A),U=[N.a,T.a,B.a,D.a],R=["No sort","Sorted a \u2192 z","Sorted z \u2192 a","Sorted reverse"],F=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this))).state={data:[],sortState:0,originalData:[]},a.handleSelect=a.handleSelect.bind(Object(g.a)(a)),a.handleSelectAll=a.handleSelectAll.bind(Object(g.a)(a)),a.sortFrames=a.sortFrames.bind(Object(g.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidUpdate",value:function(){this.checkSelectAllButtonStatus()}},{key:"handleSelectAll",value:function(e){var t=this.state.data;t.forEach(function(a,n){return t[n].isSelected=e.target.checked}),this.setState({data:t});var a=t.find(function(e){return!0===e.isSelected});window.StatusBar.setState({isDisabled:!a})}},{key:"uploadDone",value:function(){var e=this.state.data;e=e.map(function(e){return e.isUploadingDone=!1,e}),this.setState({data:e})}},{key:"handleSelect",value:function(e){var t=this.state.data,a=t.findIndex(function(t){return"frame_".concat(t.realId)===e.target.id});a>=0&&(t[a].isSelected=!t[a].isSelected),this.checkSelectAllButtonStatus(),this.setState({data:t});var n=t.find(function(e){return!0===e.isSelected});window.StatusBar.setState({isDisabled:!n})}},{key:"sortFrames",value:function(){var e=this.state.data;switch(this.state.sortState%4){case 0:e=e.sort(function(e,t){return e.name.localeCompare(t.name)});break;case 1:e=e.sort(function(e,t){return t.name.localeCompare(e.name)});break;case 2:e=Object(s.a)(this.state.originalData).reverse();break;case 3:e=Object(s.a)(this.state.originalData)}var t=this.state.sortState+1;this.setState({data:e,sortState:t})}},{key:"checkSelectAllButtonStatus",value:function(){var e=this.state.data,t=e.every(function(e){return!0===e.isSelected}),a=document.getElementById("SelectAll");if(t)return a.indeterminate=!1,void(a.checked=!0);var n=e.every(function(e){return!1===e.isSelected});if(n)return a.indeterminate=!1,void(a.checked=!1);n||t||(a.indeterminate=!0)}},{key:"render",value:function(){var e=this;return o.a.createElement("div",{className:"List"},o.a.createElement("div",{className:"FrameRow ListHeader"},o.a.createElement("div",{className:"checkbox"},o.a.createElement("input",{className:"checkbox__box",type:"checkbox",id:"SelectAll",onClick:this.handleSelectAll}),o.a.createElement("label",{className:"checkbox__label muted",htmlFor:"SelectAll"},"Frames")),o.a.createElement("div",{className:"sorter"},o.a.createElement("span",{className:"sort-text"},R[this.state.sortState%4]),o.a.createElement("button",{onClick:this.sortFrames,className:"iconButton"},o.a.createElement("img",{src:U[this.state.sortState%4],alt:"sort"})))),o.a.createElement(O.b,{flipKey:this.state.sortState},this.state.data.map(function(t,a){return o.a.createElement(O.a,{key:t.id,flipId:t.id},o.a.createElement("div",{className:"FrameRow",key:t.id},o.a.createElement("div",{className:"checkbox"},o.a.createElement("input",{className:"checkbox__box",type:"checkbox",checked:t.isSelected,onChange:e.handleSelect,id:"frame_".concat(t.realId)}),o.a.createElement("label",{className:"checkbox__label muted",htmlFor:"frame_".concat(t.realId)},o.a.createElement("span",null,t.name)),t.isUploading&&o.a.createElement(E.a,{opposite:!0,when:t.isUploading||!1},o.a.createElement("div",{className:"loader"},o.a.createElement("img",{src:x.a,alt:"loading"}))),o.a.createElement(E.a,{when:t.isUploadingDone||!1},o.a.createElement("div",{className:"done"},o.a.createElement("img",{src:I.a,alt:"done"}))))))})))}}]),t}(o.a.Component),P="https://sync-to-slides.uc.r.appspot.com",q=["https://www.googleapis.com/discovery/v1/apis/slides/v1/rest","https://www.googleapis.com/discovery/v1/apis/storage/v1/rest"],X={getToken:function(){return new Promise(function(e,t){window.addEventListener("message",function(t){var a=t.data;a.pluginMessage&&"fig-get-token"===a.pluginMessage.type&&e(a.pluginMessage.value)}),window.parent.postMessage({pluginMessage:{type:"getToken"}},"*")})},setToken:function(e){return new Promise(function(t,a){window.addEventListener("message",function(e){var n=e.data;n.pluginMessage&&"fig-set-token"===n.pluginMessage.type&&(n.pluginMessage.success?t(!0):a(!1))}),window.parent.postMessage({pluginMessage:{type:"setToken",value:e}},"*")})},authenticateAndGetToken:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n,s,r;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,fetch("".concat(P,"/keys"));case 2:return e.next=4,e.sent.json();case 4:t=e.sent,a=t.read_key,n=t.write_key,window.open("".concat(P,"/start?write_key=").concat(encodeURIComponent(n)),"_blank");case 8:return e.prev=9,e.next=12,fetch("".concat(P,"/finish?read_key=").concat(encodeURIComponent(a)));case 12:return e.next=14,e.sent.json();case 14:if(null===(r=e.sent).access_token){e.next=18;break}return s=r.access_token,e.abrupt("break",26);case 18:e.next=22;break;case 20:e.prev=20,e.t0=e.catch(9);case 22:return e.next=24,new Promise(function(e){return setTimeout(e,500+1e3*Math.random())});case 24:e.next=8;break;case 26:return e.abrupt("return",s);case 27:case"end":return e.stop()}},e,null,[[9,20]])}));return function(){return e.apply(this,arguments)}}(),signOut:function(){var e=Object(r.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:this.setToken(null);case 1:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}(),initClient:function(){var e=Object(r.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",window.gapi.client.init({clientId:"483899333633-5nfvf04rick2qvq7llt1vfcjj3jjhg3u.apps.googleusercontent.com",discoveryDocs:q,scope:"https://www.googleapis.com/auth/presentations https://www.googleapis.com/auth/devstorage.read_write"}));case 1:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},z=(a(43),a(23)),W=a.n(z),G=a(24),K=a.n(G),H=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this))).state={msg:"",type:"loading"},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"Message"},""!==this.state.msg&&"loading"===this.state.type&&o.a.createElement("img",{src:x.a,alt:"loading"}),"success"===this.state.type&&o.a.createElement("img",{src:I.a,alt:"done"}),"error"===this.state.type&&o.a.createElement("img",{src:W.a,alt:"Failed"}),"lock"===this.state.type&&o.a.createElement("img",{src:K.a,alt:"Locked"}),o.a.createElement("div",{className:"Text"},this.state.msg))}}]),t}(o.a.Component),J=a(25),V=a.n(J),Y=(a(44),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).handleSync=a.handleSync.bind(Object(g.a)(a)),a.handleMenu=a.handleMenu.bind(Object(g.a)(a)),a.logOut=a.logOut.bind(Object(g.a)(a)),a.hideMenu=a.hideMenu.bind(Object(g.a)(a)),a.setWrapperRef=a.setWrapperRef.bind(Object(g.a)(a)),a.handleClickOutside=a.handleClickOutside.bind(Object(g.a)(a)),a.state={isDisabled:!0,isMenuOpen:!1},a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"componentDidMount",value:function(){document.addEventListener("mousedown",this.handleClickOutside)}},{key:"componentWillUnmount",value:function(){document.removeEventListener("mousedown",this.handleClickOutside)}},{key:"setWrapperRef",value:function(e){this.wrapperRef=e}},{key:"handleClickOutside",value:function(e){this.wrapperRef&&!this.wrapperRef.contains(e.target)&&this.hideMenu()}},{key:"handleSync",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:t=window.ListComponent.state.id,a=window.ListComponent.state.data.filter(function(e){return e.isSelected}),this.showLoadingIndicator(a),window.parent.postMessage({pluginMessage:{type:"get-image-data",data:{frames:a,id:t}}},"*"),this.setState({isDisabled:!0}),window.Message.setState({msg:"Fetching data from figma...",type:"loading"});case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"handleUpload",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return t=window.ListComponent.state.id,e.next=3,this.uploadImagesToCloudStore();case 3:a=e.sent,window.Message.setState({msg:"Fetching presentation info...",type:"loading"}),new v(t,a);case 6:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"showLoadingIndicator",value:function(e){var t=window.ListComponent.state.data;e.forEach(function(e){var a=t.findIndex(function(t){return t.id===e.id});t[a].isUploading=!0}),window.ListComponent.setState({data:t})}},{key:"uploadImagesToCloudStore",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a,n;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return window.Message.setState({msg:"Uploading images to cloud...",type:"loading"}),t=window.ListComponent.state.data,a=window.ListComponent.state.data.filter(function(e){return e.isSelected}),e.next=5,Promise.all(a.map(function(){var e=Object(r.a)(i.a.mark(function e(a){var n,s,r,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return n=t.findIndex(function(e){return e.id===a.id}),t[n].isUploading=!0,window.ListComponent.setState({data:t}),s=btoa(new Uint8Array(a.imageData).reduce(function(e,t){return e+String.fromCharCode(t)},"")),a.base64Data=s,r=new w(a),e.next=8,r.insert();case 8:return c=e.sent,o=t.findIndex(function(e){return e.id===a.id}),t[o].isUploading=!1,t[o].isUploadingDone=!0,window.ListComponent.setState({data:t}),e.abrupt("return",c);case 14:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}()));case 5:return n=e.sent,e.abrupt("return",n);case 7:case"end":return e.stop()}},e)}));return function(){return e.apply(this,arguments)}}()},{key:"handleMenu",value:function(){this.setState({isMenuOpen:!this.state.isMenuOpen})}},{key:"logOut",value:function(){X.signOut(),this.hideMenu(),this.props.updateSignInStatus({isSignedIn:!1,isFinishedChecking:!0})}},{key:"hideMenu",value:function(){this.setState({isMenuOpen:!1})}},{key:"render",value:function(){return o.a.createElement("div",{className:"StatusBar"},o.a.createElement("div",{className:"Actions"},o.a.createElement("button",{className:"button button--primary",disabled:this.state.isDisabled,onClick:this.handleSync},"Sync to Slides")),o.a.createElement("div",{className:"Status"},o.a.createElement(H,{ref:function(e){window.Message=e}}),o.a.createElement("div",{style:{flex:1}}),o.a.createElement("div",{className:"menu",ref:this.setWrapperRef},o.a.createElement("button",{className:"iconButton",onClick:this.handleMenu,tabIndex:"0"},o.a.createElement("img",{src:V.a,alt:"Settings"})),this.state.isMenuOpen&&o.a.createElement("div",{className:"menu-items"},o.a.createElement("div",{className:"menu-item",onClick:this.logOut},"Logout")))))}}]),t}(o.a.Component)),$=(a(45),a(26)),Q=a.n($),Z=a(27),ee=a.n(Z),te=a(28),ae=a.n(te),ne=function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this,e))).host="https://sync-to-slides-public.uc.r.appspot.com",a.state={isSignedIn:!1},a.signIn=a.signIn.bind(Object(g.a)(a)),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"signIn",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.authenticateAndGetToken();case 2:return t=e.sent,e.next=5,X.setToken(t);case 5:e.sent&&(this.props.updateSignInStatus({isSignedIn:!0,isFinishedChecking:!0}),X.initClient().then(function(){window.gapi.client.setToken({access_token:t}),window.parent.postMessage({pluginMessage:{type:"get-frames"}},"*")}));case 7:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){return o.a.createElement("div",{className:"Login"},o.a.createElement("div",{className:"large-header"}),o.a.createElement("div",{className:"header"}),o.a.createElement("div",{className:"logo animated fadeIn"},o.a.createElement("img",{src:Q.a,alt:""})),o.a.createElement("div",{className:"body"},o.a.createElement("div",{className:"title animated fadeInUp"},o.a.createElement("img",{src:ee.a,alt:"Logo"})),o.a.createElement("div",{className:"title-content animated fadeInUp"},o.a.createElement("p",null,"Upload frames to Google Slides with ease. For a hassle free presentation making.")),o.a.createElement("div",{className:"signInButton animated fadeInUp"},o.a.createElement("button",{id:"signIn",className:"sign-in",onClick:this.signIn},o.a.createElement("div",{className:"g-logo"},o.a.createElement("img",{src:ae.a,alt:"Google G"})),o.a.createElement("span",null,"Sign in with Google ")))))}}]),t}(o.a.Component),ie=(a(46),function(e){function t(e){return Object(d.a)(this,t),Object(m.a)(this,Object(h.a)(t).call(this))}return Object(f.a)(t,e),Object(p.a)(t,[{key:"render",value:function(){return o.a.createElement("div",{className:"Loading"},o.a.createElement("div",{className:"loader"},o.a.createElement("svg",{x:"0px",y:"0px",width:"24px",height:"30px",viewBox:"0 0 24 30"},o.a.createElement("rect",{x:"0",y:"10",width:"4",height:"10",fill:"#888",opacity:"0.2"},o.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"0.2; 1; .2",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"height",attributeType:"XML",values:"10; 20; 10",begin:"0s",dur:"0.6s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",attributeType:"XML",values:"10; 5; 10",begin:"0s",dur:"0.6s",repeatCount:"indefinite"})),o.a.createElement("rect",{x:"8",y:"10",width:"4",height:"10",fill:"#888",opacity:"0.2"},o.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"0.2; 1; .2",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"height",attributeType:"XML",values:"10; 20; 10",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",attributeType:"XML",values:"10; 5; 10",begin:"0.15s",dur:"0.6s",repeatCount:"indefinite"})),o.a.createElement("rect",{x:"16",y:"10",width:"4",height:"10",fill:"#888",opacity:"0.2"},o.a.createElement("animate",{attributeName:"opacity",attributeType:"XML",values:"0.2; 1; .2",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"height",attributeType:"XML",values:"10; 20; 10",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"}),o.a.createElement("animate",{attributeName:"y",attributeType:"XML",values:"10; 5; 10",begin:"0.3s",dur:"0.6s",repeatCount:"indefinite"})))))}}]),t}(o.a.Component)),se=(a(47),function(e){function t(e){var a;return Object(d.a)(this,t),(a=Object(m.a)(this,Object(h.a)(t).call(this))).updateSignInStatus=function(e){a.setState(e)},a.state={isSignedIn:!1,isFinishedChecking:!1},a.initClient=a.initClient.bind(Object(g.a)(a)),window.gapi.load("client:auth2",a.initClient),a}return Object(f.a)(t,e),Object(p.a)(t,[{key:"initClient",value:function(){var e=Object(r.a)(i.a.mark(function e(){var t,a=this;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,X.getToken();case 2:return t=e.sent,e.next=5,fetch("https://oauth2.googleapis.com/tokeninfo?access_token=".concat(t));case 5:return e.next=7,e.sent.json();case 7:e.sent.error?this.setState({isSignedIn:!1,isFinishedChecking:!0}):X.initClient().then(Object(r.a)(i.a.mark(function e(){return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:window.gapi.client.setToken({access_token:t}),a.setState({isSignedIn:!0,isFinishedChecking:!0}),window.parent.postMessage({pluginMessage:{type:"get-frames"}},"*");case 3:case"end":return e.stop()}},e)})));case 9:case"end":return e.stop()}},e,this)}));return function(){return e.apply(this,arguments)}}()},{key:"render",value:function(){var e=this.state.isSignedIn,t=this.state.isFinishedChecking,a=o.a.createElement("div",{className:"App"},o.a.createElement(ie,null));return t&&e&&(a=o.a.createElement("div",{className:"App"},o.a.createElement(k,{ref:function(e){window.AddressBar=e},className:"header"}),o.a.createElement(F,{className:"body",ref:function(e){window.ListComponent=e}}),o.a.createElement(Y,{ref:function(e){window.StatusBar=e},updateSignInStatus:this.updateSignInStatus,className:"footer"}))),t&&!e&&(a=o.a.createElement("div",{className:"App"},o.a.createElement(ne,{updateSignInStatus:this.updateSignInStatus}))),a}}]),t}(o.a.Component));Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(o.a.createElement(se,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()}),window.addEventListener("message",function(){var e=Object(r.a)(i.a.mark(function e(t){var a,n,r,c,o;return i.a.wrap(function(e){for(;;)switch(e.prev=e.next){case 0:if(a=t.data.pluginMessage){e.next=3;break}return e.abrupt("return");case 3:"fig-frames"===a.type&&(window.ListComponent.setState({data:a.data,originalData:Object(s.a)(a.data)}),n=window.ListComponent.state.data,r=n.find(function(e){return!0===e.isSelected}),window.StatusBar.setState({isDisabled:!r})),"fig-preso-data"===a.type&&(window.AddressBar.setState({data:a.data}),window.ListComponent.setState({data:window.ListComponent.state.data,originalData:Object(s.a)(window.ListComponent.state.originalData),id:a.data.id})),"fig-image-data"===a.type&&(c=a.data.imageData,o=window.ListComponent.state.data.map(function(e){var t=c.find(function(t){return t.realId===e.realId});return t||e}),window.ListComponent.setState({data:o,originalData:Object(s.a)(o),id:a.data.id}),window.StatusBar.handleUpload());case 6:case"end":return e.stop()}},e)}));return function(t){return e.apply(this,arguments)}}())}],[[29,1,2]]]);
//# sourceMappingURL=main.3cf9d4d4.chunk.js.map